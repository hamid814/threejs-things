!function(){"use strict";var e,i={5769:function(e,i,n){var t=n(2212);function r(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function o(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function s(e,i,n){return i&&o(e.prototype,i),n&&o(e,n),e}var h,a="x",d="y",c="z",u={corner:[0,2,4,6,8,9,10,11,12,14,16,18],cornerDirections:[{i:0,d:a},{i:2,d:c},{i:4,d:a},{i:6,d:c},{i:8,d:d},{i:9,d:d},{i:10,d:d},{i:11,d:d},{i:12,d:a},{i:14,d:c},{i:16,d:a},{i:18,d:c}],edgesDirections:{x:[{i:0,d:c},{i:2,d:a},{i:3,d:a},{i:5,d:a},{i:6,d:a},{i:7,d:d},{i:8,d:d},{i:9,d:c},{i:11,d:a},{i:12,d:a},{i:14,d:a},{i:15,d:a}],y:[{i:0,d:d},{i:1,d:d},{i:2,d:d},{i:3,d:d},{i:4,d:a},{i:6,d:c},{i:8,d:a},{i:10,d:c},{i:12,d:d},{i:13,d:d},{i:14,d:d},{i:15,d:d}],z:[{i:0,d:a},{i:1,d:c},{i:3,d:c},{i:4,d:c},{i:6,d:c},{i:7,d:d},{i:8,d:d},{i:9,d:a},{i:10,d:c},{i:12,d:c},{i:13,d:c},{i:15,d:c}]}},l=function(e,i,n){if("corner"===e)return u.cornerDirections.filter((function(e){return e.i===i}))[0].d;if("edge"===e){var t=u.edgesDirections[n].filter((function(e){return e.i===i}))[0];return t?t.d:t}},w=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new f(0,0,0),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;r(this,e),this.cubeMagnetude=n,this.level=i,this.cubeSize=1,this.position=t||new f(0,0,0),this.width=Math.pow(3,i),this.children=[],this.childSize=this.width/3,this.childrenType=null,this.mother=o,this.isEdge=void 0!==s&&s,this.direction=h,this.center=new f(this.width/2+.5,this.width/2+.5,this.width/2+.5),this.centerToPosition=this.position.retsub(this.center),this.centerNegate=new f(-this.center.x,-this.center.y,-this.center.z),this.facesCount=0,this.childrenType=1===i?"cube":"menger",this.initChildren()}return s(e,[{key:"isNeighbour",value:function(e){var i=Math.pow(3,this.level);function n(e,i){return(Math.ceil(e/(i/3))-1)%2==1}function t(e,i,t){return n(e,t)&&n(i,t)}return e.x>i||e.x<1||e.y>i||e.y<1||e.z>i||e.z<1?2:function i(n){return t(e.x,e.y,n)||t(e.y,e.z,n)||t(e.z,e.x,n)?1:3!==n?i(n/3):0}(i)}},{key:"initChildren",value:function(){var i=this;if(this.mother){var n=[],t=this.position.x+this.childSize,r=this.position.x-this.childSize,o=this.position.y+this.childSize,s=this.position.y-this.childSize,h=this.position.z+this.childSize,w=this.position.z-this.childSize,p=this.position.x,x=this.position.y,z=this.position.z;this.isEdge?this.direction===a?n=[new f(p,o,z),new f(p,o,w),new f(t,o,w),new f(t,o,h),new f(p,o,h),new f(r,o,h),new f(r,o,w),new f(p,x,w),new f(p,x,h),new f(p,s,z),new f(p,s,w),new f(t,s,w),new f(t,s,h),new f(p,s,h),new f(r,s,h),new f(r,s,w)]:this.direction===d?n=[new f(t,o,w),new f(t,o,h),new f(r,o,h),new f(r,o,w),new f(p,x,w),new f(t,x,w),new f(t,x,z),new f(t,x,h),new f(p,x,h),new f(r,x,h),new f(r,x,z),new f(r,x,w),new f(t,s,w),new f(t,s,h),new f(r,s,h),new f(r,s,w)]:this.direction===c&&(n=[new f(p,o,z),new f(t,o,w),new f(t,o,z),new f(t,o,h),new f(r,o,h),new f(r,o,z),new f(r,o,w),new f(t,x,z),new f(r,x,z),new f(p,s,z),new f(t,s,w),new f(t,s,z),new f(t,s,h),new f(r,s,h),new f(r,s,z),new f(r,s,w)]):(n[0]=new f(p,o,w),n[1]=new f(t,o,w),n[2]=new f(t,o,z),n[3]=new f(t,o,h),n[4]=new f(p,o,h),n[5]=new f(r,o,h),n[6]=new f(r,o,z),n[7]=new f(r,o,w),n[8]=new f(t,x,h),n[9]=new f(t,x,w),n[10]=new f(r,x,w),n[11]=new f(r,x,h),n[12]=new f(p,s,w),n[13]=new f(t,s,w),n[14]=new f(t,s,z),n[15]=new f(t,s,h),n[16]=new f(p,s,h),n[17]=new f(r,s,h),n[18]=new f(r,s,z),n[19]=new f(r,s,w)),this.isEdge?"cube"===this.childrenType?n.forEach((function(e){for(var n=[],t=0;t<y.length;t++){var r=y[t],o=r.position,s=new f(e.x,e.y,e.z);s.x+=o.x,s.y+=o.y,s.z+=o.z,i.mother.isNeighbour(s)&&n.push(r.id)}i.mother.addToFacesCount(n.length);var h=new v(e,i.childSize,n);i.children.push(h)})):"menger"===this.childrenType&&n.forEach((function(n,t){var r=!1,o=l("edge",t,i.direction);o&&(r=!0);var s=new e(i.level-1,i.cubeSize,n,i.mother,r,o);i.children.push(s)})):"cube"===this.childrenType?n.forEach((function(e){for(var n=[],t=0;t<y.length;t++){var r=y[t],o=r.position,s=new f(e.x,e.y,e.z);s.x+=o.x,s.y+=o.y,s.z+=o.z,i.mother.isNeighbour(s)&&n.push(r.id)}i.mother.addToFacesCount(n.length);var h=new v(e,i.childSize,n);i.children.push(h)})):"menger"===this.childrenType&&n.forEach((function(n,t){var r=!1,o=void 0;-1!==u.corner.indexOf(t)&&(o=l("corner",t),r=!0);var s=new e(i.level-1,i.cubeSize,n,i.mother,r,o);i.children.push(s)}))}else{var g=[],m=this.center.x+this.childSize,b=this.center.x-this.childSize,C=this.center.y+this.childSize,S=this.center.y-this.childSize,k=this.center.z+this.childSize,P=this.center.z-this.childSize,T=this.center.x,E=this.center.y,O=this.center.z;g[0]=new f(T,C,P),g[1]=new f(m,C,P),g[2]=new f(m,C,O),g[3]=new f(m,C,k),g[4]=new f(T,C,k),g[5]=new f(b,C,k),g[6]=new f(b,C,O),g[7]=new f(b,C,P),g[8]=new f(m,E,k),g[9]=new f(m,E,P),g[10]=new f(b,E,P),g[11]=new f(b,E,k),g[12]=new f(T,S,P),g[13]=new f(m,S,P),g[14]=new f(m,S,O),g[15]=new f(m,S,k),g[16]=new f(T,S,k),g[17]=new f(b,S,k),g[18]=new f(b,S,O),g[19]=new f(b,S,P),"cube"===this.childrenType?g.forEach((function(e,n){for(var t=[],r=0;r<y.length;r++){var o=y[r],s=o.position,h=new f(e.x,e.y,e.z);h.x+=s.x,h.y+=s.y,h.z+=s.z,i.isNeighbour(h)&&t.push(o.id)}i.addToFacesCount(t.length);var a=new v(e,i.childSize,t);i.children.push(a)})):"menger"===this.childrenType&&g.forEach((function(n,t){var r=!1,o=void 0;-1!==u.corner.indexOf(t)&&(o=l("corner",t),r=!0);var s=new e(i.level-1,i.cubeSize,n,i,r,o);i.children.push(s)}))}}},{key:"addToFacesCount",value:function(e){this.facesCount+=e}},{key:"getPositions",value:function(){var e=this,i=[];return"cube"===this.childrenType?(this.children.forEach((function(n){e.mother?e.mother.centerToPosition:e.centerToPosition;var t=n.position,r=e.mother?e.mother.cubeMagnetude:e.cubeMagnetude,o=e.mother?e.mother.position:e.position,s=e.mother?e.mother.centerNegate:e.centerNegate;t.x+=s.x,t.y+=s.y,t.z+=s.z,t.x*=r,t.y*=r,t.z*=r,t.x+=o.x,t.y+=o.y,t.z+=o.z,i.push({position:t,faces:n.faces})})),i):"menger"===this.childrenType?(this.children.forEach((function(e){e.getPositions().forEach((function(e){i.push(e)}))})),i):void 0}},{key:"drawP5",value:function(){this.children.forEach((function(e){e.drawP5()}))}}],[{key:"isCube",value:function(e,i){function n(e,i){return(Math.ceil(e/(i/3))-1)%2==1}function t(e,i,t){return n(e,t)&&n(i,t)}return e.x>i||e.x<1||e.y>i||e.y<1||e.z>i||e.z<1?2:function i(n){return t(e.x,e.y,n)||t(e.y,e.z,n)||t(e.z,e.x,n)?0:3!==n?i(n/3):1}(i)}}]),e}(),v=function(){function e(i,n,t){r(this,e),this.position=i,this.index=i,this.size=n,this.faces=t}return s(e,[{key:"drawP5",value:function(){push(),translate(this.position.x,this.position.y,this.position.z),box(this.size,this.size,this.size),pop()}}]),e}(),f=function(){function e(i,n,t){r(this,e),this.x=i,this.y=n,this.z=t}return s(e,[{key:"add",value:function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}},{key:"sub",value:function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}},{key:"mul",value:function(e){this.x*=e.x,this.y*=e.y,this.z*=e.z}},{key:"dev",value:function(e){this.x/=e.x,this.y/=e.y,this.z/=e.z}},{key:"retsub",value:function(i,n,t){var r=new e(this.x,this.y,this.z);if(void 0===n&&void 0===t)r.sub(i);else{var o=new e(i,n,t);r.sub(o)}return r}},{key:"retadd",value:function(i,n,t){var r=new e(this.x,this.y,this.z);if(void 0===n&&void 0===t)r.add(i);else{var o=new e(i,n,t);r.add(o)}return r}},{key:"retmul",value:function(i){var n=new e(this.x,this.y,this.z);return n.mul(i),n}},{key:"retdev",value:function(i){var n=new e(this.x,this.y,this.z);return n.dev(i),n}}]),e}(),y=[{position:new f(1,0,0),id:11},{position:new f(-1,0,0),id:10},{position:new f(0,1,0),id:21},{position:new f(0,-1,0),id:20},{position:new f(0,0,1),id:31},{position:new f(0,0,-1),id:30}],p=n(2886),x=n(5260),z=n(6426),g=n(5980),m=[0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21],b={11:[0,1,2,3,4,5],10:[6,7,8,9,10,11],21:[12,13,14,15,16,17],20:[18,19,20,21,22,23],31:[24,25,26,27,28,29],30:[30,31,32,33,34,35]},C=new t.WebGLRenderer({antialias:!0});C.setSize(innerWidth,innerHeight),C.setPixelRatio(Math.min(2,devicePixelRatio)),document.body.appendChild(C.domElement);var S=new t.Scene,k=new t.OrthographicCamera(-10,10,8,-8,1,1e3);k.lookAt(0,0,0),k.position.set(0,30,30),S.add(k),new p.OrbitControls(k,C.domElement);var P=new t.PointLight(6710920,3);P.position.set(150,150,150),S.add(P);var T=new t.PointLight(8939110,3);T.position.set(-150,150,-150),S.add(T);var E=new t.PointLight(6719590,3);E.position.set(0,-150,0),S.add(E);var O=new t.BoxGeometry,M=new t.MeshNormalMaterial,U=new w(2,3,new f(0,0,0)),_=new x.xC(C),D=new z.C(S,k);_.addPass(D);var j=new g.T({uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec2 vUv;\n\n    float map(float value, float min1, float max1, float min2, float max2) {\n      return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n    }\n    \n\t\tvoid main() {\n      vec2 doubleUv = vUv * 2.0;\n\n      if(vUv.x > 0.5) doubleUv.x = map(doubleUv.x - 1.0, 0.0, 1.0, 1.0, 0.0);\n      \n      if (vUv.y > 0.5) doubleUv.y = map(doubleUv.y - 1.0, 0.0, 1.0, 1.0, 0.0);\n\n\t\t\tvec4 vertex_Color = texture2D(tDiffuse, doubleUv);\n\n      // vertex_Color.r = map(vertex_Color.r, 0.0, 1.0, 0.3, 0.8);\n      \n      gl_FragColor = vec4(vertex_Color.r, vertex_Color.g, vertex_Color.b, 1.0);\n\t\t}"});_.addPass(j),function(e){var i=e.cubeMagnetude,n=e.getPositions();console.log("faces: ",e.facesCount),console.log("cubes count:",n.length);for(var r=new t.BufferGeometry,o=new Float32Array(2*e.facesCount*3*3),s=new Float32Array(2*e.facesCount*3*3),a=new t.BufferAttribute(o,3),d=new t.BufferAttribute(s,3),c=0,u=new t.Mesh(O,M),l=u.geometry.attributes.position,w=u.geometry.attributes.normal,v=0;v<n.length;v++)for(var f=n[v].position,y=n[v].faces,p=0;p<y.length;p++)for(var x=y[p],z=b[x],g=0;g<z.length;g++){var C=z[g];C=m[C];var k=l.array[3*C]*i+f.x,P=l.array[3*C+1]*i+f.y,T=l.array[3*C+2]*i+f.z,E=w.array[3*C],U=w.array[3*C+1],_=w.array[3*C+2];a.setXYZ(c,k,P,T),d.setXYZ(c,E,U,_),c++}r.setAttribute("position",a),r.setAttribute("normal",d),h=new t.Mesh(r,M),S.add(h)}(U),function e(){_.render(),h.rotation.y+=.005,requestAnimationFrame(e)}(),window.addEventListener("resize",(function(){return window.location.reload()}))}},n={};function t(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return i[e](o,o.exports,t),o.exports}t.m=i,e=[],t.O=function(i,n,r,o){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],o=e[d][2];for(var h=!0,a=0;a<n.length;a++)(!1&o||s>=o)&&Object.keys(t.O).every((function(e){return t.O[e](n[a])}))?n.splice(a--,1):(h=!1,o<s&&(s=o));h&&(e.splice(d--,1),i=r())}return i}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},t.d=function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},function(){var e={5008:0};t.O.j=function(i){return 0===e[i]};var i=function(i,n){var r,o,s=n[0],h=n[1],a=n[2],d=0;for(r in h)t.o(h,r)&&(t.m[r]=h[r]);if(a)var c=a(t);for(i&&i(n);d<s.length;d++)o=s[d],t.o(e,o)&&e[o]&&e[o][0](),e[s[d]]=0;return t.O(c)},n=self.webpackChunkthreejs_things=self.webpackChunkthreejs_things||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))}();var r=t.O(void 0,[2886,2214],(function(){return t(5769)}));r=t.O(r)}();